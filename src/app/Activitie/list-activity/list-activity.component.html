<div class="container">
    <h2>{{title}}</h2>
    <p>{{description}}</p>
    <table class="table">
        <thead>
        <tr>
            <th>Nombre actividad</th>
            <th>Estado</th>
            <th>Empleado</th>
            <th>Fecha de inicio</th>
            <th>DÃ­as de retraso</th>
            <th>
                <button (click)="AddActivity()" type="button" class="btn btn-success" style="margin-left: 10px">
                    {{label_add_activities}}
                </button>
            </th>
        </tr>
        </thead>

        <tbody *ngFor="let activity of activities">

        <tr *ngIf="activity.status_id == 0" class="warning">
            <td>{{activity.name}}</td>
            <td>{{activity.status}}</td>
            <div *ngIf="activity.employees_id != null; then thenBlock else elseBlock"></div>
            <ng-template #thenBlock>
                <td>{{activity.name_employed}}</td>
            </ng-template>
            <ng-template #elseBlock>
                <td></td>
            </ng-template>
            <td>{{activity.start_date!}}</td>
            <td>{{activity.delay_days!}}</td>
            <td>
                <div class="row">
                    <div class="col-sm">
                        <div class="dropdown">
                            <button class="btn btn-primary dropdown-toggle" type="button" id="dropdownMenuButton"
                                    data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                                {{employedAssigned}}
                            </button>
                            <div class="dropdown-menu"
                                 aria-labelledby="dropdownMenuButton">
                                <a *ngFor="let employed of employees" (click)="assignedEmployed(activity,employed)"
                                   class="dropdown-item">{{employed.name + " " + employed.lastName}}</a>
                            </div>
                        </div>
                    </div>
                    <div class="col-sm">
                        <button (click)="deleteActivity(activity)" type="submit" class="btn btn-danger"
                                style="margin-left: 10px">Eliminar
                        </button>
                    </div>
                </div>
            </td>
        </tr>

        <tr *ngIf="activity.status_id == 1" class="active">
            <td>{{activity.name}}</td>
            <td>{{activity.status}}</td>
            <div *ngIf="activity.employees_id != null; then thenBlock else elseBlock"></div>
            <ng-template #thenBlock>
                <td>{{activity.name_employed}}</td>
            </ng-template>
            <ng-template #elseBlock>
                <td></td>
            </ng-template>
            <td>
                <div class="row">
                    <div class="col-sm">
                        <form>
                            <input type="datetime-local" id="birthdaytime" name="birthdaytime"
                                   [formControl]="date_star">
                        </form>
                    </div>
                </div>
            </td>
            <td>{{activity.delay_days!}}</td>
            <td>
                <div class="row">
                    <div class="col-sm">
                        <button (click)="assignedDateStar(activity)" type="submit" class="btn btn-success"
                                style="margin-left: 10px">Guardar
                        </button>
                    </div>
                    <div class="col-sm">
                        <button (click)="deleteActivity(activity)" type="submit" class="btn btn-danger"
                                style="margin-left: 10px">Eliminar
                        </button>
                    </div>
                </div>
            </td>
        </tr>

        <tr *ngIf="activity.status_id == 2" class="info">
            <td>{{activity.name}}</td>
            <td>{{activity.status}}</td>
            <div *ngIf="activity.employees_id != null; then thenBlock else elseBlock"></div>
            <ng-template #thenBlock>
                <td>{{activity.name_employed}}</td>
            </ng-template>
            <ng-template #elseBlock>
                <td></td>
            </ng-template>
            <td>{{activity.start_date}}</td>
            <td>{{activity.delay_days!}}</td>
            <td>
                <div class="row">
                    <div class="col-sm">
                        <button (click)="assignedDateStar(activity)" type="submit" class="btn btn-warning"
                                style="margin-left: 10px">editar
                        </button>
                    </div>
                    <div class="col-sm">
                        <button (click)="deleteActivity(activity)" type="submit" class="btn btn-danger"
                                style="margin-left: 10px">Eliminar
                        </button>
                    </div>
                </div>
            </td>
        </tr>

        </tbody>
    </table>
</div>
